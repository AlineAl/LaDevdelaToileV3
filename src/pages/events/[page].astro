---
import Layout from "../../layouts/Layout.astro";
import Footer from "../../components/Footer.astro";
import { getCollection } from "astro:content";
import { EventListComponent } from "../../components/List/Event/EventListComponent";
import type { Page, PaginateFunction } from "astro";
import type { CollectionEntry } from "astro:content";

type Props = {
    page: Page<CollectionEntry<'events'>>;
};

export const prerender = true;

export async function getStaticPaths({ paginate }: { paginate: PaginateFunction }) {
    const eventsData = await getCollection("events");
    return paginate(eventsData);
}

const { page } = Astro.props;
---

<Layout title="Événements">
    <EventListComponent
        client:only="react"
        events={page.data}
        page={page}
    />
    <Footer />
</Layout>
